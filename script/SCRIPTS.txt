CREATE TABLE LOOKUP_TYPES 
(
  LOOKUP_ID NUMBER NOT NULL 
, LOOKUP_TYPE VARCHAR2(50) NOT NULL 
, DESCRIPTION VARCHAR2(2000) 
, CREATED_BY VARCHAR2(20) NOT NULL 
, AMEND_BY VARCHAR2(20) NOT NULL 
, CREATION_DATE DATE NOT NULL 
, AMEND_DATE DATE NOT NULL 
, VERSION_NO NUMBER NOT NULL 
, CONSTRAINT LOOKUP_TYPES_PK PRIMARY KEY 
  (
    LOOKUP_ID 
  )
  ENABLE 
);



CREATE TABLE LOOKUP_DETAILS 
(
  LOOK_DEAILS_ID NUMBER NOT NULL 
, LOOKUP_TYPE NUMBER NOT NULL 
, LOOKUP_CODE VARCHAR2(20) NOT NULL 
, DESCRIPTION VARCHAR2(200) NOT NULL 
, CREATED_BY VARCHAR2(20) NOT NULL 
, AMEND_BY VARCHAR2(20) NOT NULL 
, CREATION_DATE DATE NOT NULL 
, AMEND_DATE DATE NOT NULL 
, VERSION_NO NUMBER NOT NULL 
,"NOTES" VARCHAR2(2000 BYTE), 
"USED_SCREEN" VARCHAR2(2000 BYTE)
, CONSTRAINT LOOKUP_DETAILS_PK PRIMARY KEY 
  (
    LOOK_DEAILS_ID 
  )
  ENABLE 
);

ALTER TABLE LOOKUP_DETAILS
ADD CONSTRAINT LOOKUP_DETAILS_FK1 FOREIGN KEY
(
  LOOKUP_TYPE 
)
REFERENCES LOOKUP_TYPES
(
  LOOKUP_ID 
)
ON DELETE CASCADE ENABLE;
CREATE SEQUENCE  "LAYWER"."LOOKUP_ID_SEQ"  MINVALUE 1 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 START WITH 1 CACHE 20 NOORDER  NOCYCLE ;
CREATE SEQUENCE  "LAYWER"."LOOKUP_DETAILS_ID_SEQ"  MINVALUE 1 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 START WITH 1 CACHE 20 NOORDER  NOCYCLE ;

CREATE OR REPLACE TRIGGER ASSIGN_LOOKUP_ID
BEFORE INSERT ON LOOKUP_TYPES FOR EACH ROW
BEGIN
  IF :NEW.LOOKUP_ID IS NULL OR :NEW.LOOKUP_ID < 0 THEN
    SELECT LOOKUP_ID_SEQ.NEXTVAL INTO :NEW.LOOKUP_ID FROM DUAL;
  END IF;
END;

CREATE OR REPLACE TRIGGER ASSIGN_LOOKUP_DETAILS_ID
BEFORE INSERT ON LOOKUP_DETAILS FOR EACH ROW
BEGIN
  IF :NEW.LOOK_DEAILS_ID IS NULL OR :NEW.LOOK_DEAILS_ID < 0 THEN
    SELECT LOOKUP_DETAILS_ID_SEQ.NEXTVAL INTO :NEW.LOOK_DEAILS_ID FROM DUAL;
  END IF;
END;
